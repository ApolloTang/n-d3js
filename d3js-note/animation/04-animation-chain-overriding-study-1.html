<!DOCTYPE html>
<meta charset="utf-8">
<style>
</style>

<body>
    <svg width="400" height="400" style="border:1px solid black">
        <g class="myGroup">
            <circle r="5" cx="20" cy="20" class="red" ztransform="translate(10,10)" fill="red"></circle>
            <circle r="5" cx="20" cy="40" class="green" ztransform="translate(10,100)" fill="green"></circle>
        </g>
    </svg>
    <script src="http://localhost:8001/js/lib/d3-3.4.13.js"></script>
    <script src="http://localhost:8001/js/lib/moment-v2.10.3.js"></script>

    <script>
        // see Interactive Data Visualization for the web p155.

        d3.selectAll("circle")
            .transition('one')
            .duration(2000)
            .attr("cx",300)
            .each('end', function(){
                var circle = d3.select(this);
                if ( circle.attr('class') == 'red' ) {
                    var x = circle.attr('cx');
                    circle
                    .transition('start one') //over ride transition seecond, but one the red one
                    .duration(2000)
                    .attr('cx', +x+50 );
                }
            })
            .transition('second')
            .duration(2000)
            .attr("cy",300)
            .each('end', function(){
                d3.select(this)
                .transition('run-after-first-animation-is-done')
                .duration(2000)
                .attr('r', '40')
            })
    </script>
</body>
